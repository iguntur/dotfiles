#!/bin/bash

export SHELL_NAME="$(basename $SHELL)"

##
## Load our dotfiles
##   Use it to configure your PATH, this it being first in line.
##
if [ -f "$HOME/.dotfiles/autoload/main" ]; then
	source "$HOME/.dotfiles/autoload/main"
fi

if cmd_exists neofetch; then
	neofetch
elif cmd_exists screenfetch; then
	screenfetch
fi


################################################################################
# Z
################################################################################
load_source "/usr/share/z/z.sh"


################################################################################
# FZF
################################################################################
if [ $SHELL_NAME = "zsh" ]; then
	load_source "/usr/share/fzf/key-bindings.zsh"
	load_source "/usr/share/fzf/completion.zsh"
elif [ $SHELL_NAME = "bash" ]; then
	load_source "/usr/share/fzf/key-bindings.bash"
	load_source "/usr/share/fzf/completion.bash"
fi


################################################################################
# NodeJS Version Manager (NVM)
################################################################################
# Install nvm from aur repo.
# yay -S nvm
load_source "/usr/share/nvm/init-nvm.sh"


################################################################################
# Github CLI
################################################################################
if cmd_exists gh; then
	case $SHELL_NAME in
		bash) source <(gh completion -s bash);;
		zsh) source <(gh completion -s zsh);;
	esac
fi


################################################################################
# Kubernetes
################################################################################
if cmd_exists minikube; then
	case $SHELL_NAME in
		bash) source <(minikube completion bash);;
		zsh) source <(minikube completion zsh);;
	esac
fi

if cmd_exists kubectl; then
	case $SHELL_NAME in
		bash) source <(kubectl completion bash);;
		zsh) source <(kubectl completion zsh);;
	esac
fi


################################################################################
# OCaml - opam configuration
################################################################################
if [ $SHELL_NAME = "zsh" ]; then
	load_source ${HOME}/.opam/opam-init/init.zsh > /dev/null 2> /dev/null || true
elif [ $SHELL_NAME = "bash" ]; then
	load_source ${HOME}/.opam/opam-init/init.bash > /dev/null 2> /dev/null || true
fi


################################################################################
# Heroku - autocomplete setup
################################################################################
if [ $SHELL_NAME = "zsh" ]; then
	HEROKU_AC_ZSH_SETUP_PATH=$HOME/.cache/heroku/autocomplete/zsh_setup
	load_source $HEROKU_AC_ZSH_SETUP_PATH
fi


################################################################################
# more options here...
################################################################################
if [ $SHELL_NAME = "zsh" ]; then
	load_source "/usr/share/zsh/site-contrib/powerline.zsh"
fi
